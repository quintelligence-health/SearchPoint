package si.ijs.searchpoint;

import java.io.IOException;

public class SearchPoint {

	private static SearchPoint instance;
	
	static {
		try {
			System.loadLibrary("SearchPointJava");
		} catch (UnsatisfiedLinkError e) {
			e.printStackTrace();
			System.exit(1);
		}
	}
	
	public static synchronized SearchPoint getInstance() {
		if (instance == null) {
			instance = new SearchPoint();
		}
		return instance;
	};
	
	private SearchPoint() {}
	
	public void init(String bingApiKey, String unicodeDefPath) throws IOException {
		init(unicodeDefPath, null);
	}
	
	public native void init(String bingApiKey, String unicodeDefPath, String dmozDatFile) throws IOException;
	
	public native String processQuery(String query, String clustKey, int limit);
	
	public native String rankByPos(double x, double y, int page, String queryId);
	
	public native String fetchKeywords(double x, double y, String queryId);
	
	public native String getQueryId(String query, String clustering, int limit);
	
	public native void close();
}
